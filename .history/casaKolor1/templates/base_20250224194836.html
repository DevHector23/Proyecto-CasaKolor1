{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CasaKolor1</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/menu.css' %}">
    <link rel="stylesheet" href="{% static 'css/estilo.css' %}">
    {% block style %}{% endblock %}
    <style>
        .user-menu {
    position: relative;
    display: inline-block;
    z-index: 1000;
}

.user-menu img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    cursor: pointer;
}

.user-dropdown {
    display: none;
    position: absolute;
    top: 50px;
    right: 0;
    background: white;
    border-radius: 10px;
    box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
    padding: 15px;
    min-width: 200px;
    text-align: center;
}

.user-dropdown .user-info {
    text-align: left;
    font-size: 14px;
    padding: 10px 0;
}

.user-dropdown .profile-pic {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    margin-bottom: 10px;
}

.user-dropdown p {
    margin: 5px 0;
    color: #333;
}

.user-menu:hover .user-dropdown {
    display: block;
}

.user-dropdown hr {
    margin: 10px 0;
    border-top: 1px solid #ddd;
}

.user-dropdown a {
    display: block;
    padding: 5px 10px;
    text-decoration: none;
    color: white;
}

    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg fixed-top w-100">
        <div class="container-fluid">
            <a class="navbar-brand me-auto" href="{% url 'home' %}">
                <img src="{% static 'images/logo.png' %}" alt="CasaKolor1 Logo" height="100">
            </a>

            <!-- Men√∫ de usuario -->
            <div class="user-menu">
                <img src="{% static 'images/perfil.png' %}" alt="Perfil" id="user-icon">
                
                <div class="user-dropdown">
                    {% if user.is_authenticated %}
                        <div class="user-info">
                            <img src="{% static 'images/perfil_usuario.png' %}" alt="Foto de perfil" class="profile-pic">
                            <p class="user-name">üë§ {{ user.username }}</p>
                            <p class="user-email">üìß {{ user.email }}</p>
                            <p class="user-phone">üìû {{ user.profile.phone }}</p>
                            <p class="user-address">üè† {{ user.profile.address }}</p>
                        </div>
                        <hr>
                        <a href="{% url 'logout' %}" class="btn btn-danger btn-sm w-100">Cerrar sesi√≥n</a>
                    {% else %}
                        <a href="{% url 'login' %}" class="btn btn-primary btn-sm w-100">Iniciar sesi√≥n</a>
                    {% endif %}
                </div>
            </div>

            <button class="navbar-toggler pe-0" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>
    
    {% block content %}
    <main></main>
    {% endblock %}
    
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Todos los derechos reservados | Dise√±ado por H√©ctor Parra</p>
        </div>
    </footer>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
    let userMenu = document.querySelector(".user-menu");
    let dropdown = document.querySelector(".user-dropdown");

    document.addEventListener("click", function (event) {
        if (!userMenu.contains(event.target)) {
            dropdown.style.display = "none";
        }
    });

    userMenu.addEventListener("mouseenter", function () {
        dropdown.style.display = "block";
    });

    userMenu.addEventListener("mouseleave", function (event) {
        let relatedTarget = event.relatedTarget;
        if (!dropdown.contains(relatedTarget)) {
            dropdown.style.display = "none";
        }
    });
});

    </script>
    <script src="{% static 'js/menu.js' %}"></script>
    <script src="{% static 'js/carrito.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
